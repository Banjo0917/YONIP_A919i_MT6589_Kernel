#include <mach/mt_typedefs.h>

#define TEMPERATURE_T0                  110
#define TEMPERATURE_T1                  0
#define TEMPERATURE_T2                  25
#define TEMPERATURE_T3                  50
#define TEMPERATURE_T                   255 // This should be fixed, never change the value

#define FG_METER_RESISTANCE 	0

#define MAX_BOOTING_TIME_FGCURRENT	1*10 // 10s

#if defined(CONFIG_POWER_EXT)
#define OCV_BOARD_COMPESATE	72 //mV 
#define R_FG_BOARD_BASE		1000
#define R_FG_BOARD_SLOPE	1000 //slope
#else
#define OCV_BOARD_COMPESATE	0 //mV 
#define R_FG_BOARD_BASE		1000
#define R_FG_BOARD_SLOPE	1000 //slope
#endif

#define Q_MAX_POS_50	2064
#define Q_MAX_POS_25	2044
#define Q_MAX_POS_0		1968
#define Q_MAX_NEG_10	1838

#define Q_MAX_POS_50_H_CURRENT	2047
#define Q_MAX_POS_25_H_CURRENT	2022
#define Q_MAX_POS_0_H_CURRENT	  1854
#define Q_MAX_NEG_10_H_CURRENT	1485

#define R_FG_VALUE 				20 // mOhm, base is 20
#define CURRENT_DETECT_R_FG	10  //1mA

#define OSR_SELECT_7			0

#define CAR_TUNE_VALUE			81 //1.00

/////////////////////////////////////////////////////////////////////
// <DOD, Battery_Voltage> Table
/////////////////////////////////////////////////////////////////////
typedef struct _BATTERY_PROFILE_STRUC
{
    kal_int32 percentage;
    kal_int32 voltage;
} BATTERY_PROFILE_STRUC, *BATTERY_PROFILE_STRUC_P;

typedef enum
{
    T1_0C,
    T2_25C,
    T3_50C
} PROFILE_TEMPERATURE;

// T0 -10C
BATTERY_PROFILE_STRUC battery_profile_t0[] =
{
	{0    , 4308},         
	{2    , 4274},         
	{3    , 4229},         
	{5    , 4196},         
	{6    , 4174},         
	{8    , 4155},         
	{10   , 4138},         
	{11   , 4122},         
	{13   , 4106},         
	{15   , 4093},         
	{16   , 4078},         
	{18   , 4062},         
	{19   , 4045},         
	{21   , 4028},         
	{23   , 4013},         
	{24   , 3998},         
	{26   , 3984},         
	{28   , 3971},         
	{29   , 3959},         
	{31   , 3948},         
	{32   , 3936},         
	{34   , 3923},         
	{36   , 3912},         
	{37   , 3900},         
	{39   , 3888},         
	{41   , 3876},         
	{42   , 3866},         
	{44   , 3856},         
	{45   , 3846},         
	{47   , 3837},         
	{49   , 3829},         
	{50   , 3822},         
	{52   , 3815},         
	{54   , 3810},         
	{55   , 3804},         
	{57   , 3798},         
	{58   , 3794},         
	{60   , 3789},         
	{62   , 3785},         
	{63   , 3782},         
	{65   , 3779},         
	{67   , 3776},         
	{68   , 3773},         
	{70   , 3770},         
	{71   , 3766},         
	{73   , 3763},         
	{75   , 3759},         
	{76   , 3753},         
	{78   , 3748},         
	{80   , 3742},         
	{81   , 3734},         
	{83   , 3727},         
	{84   , 3717},         
	{86   , 3708},         
	{88   , 3697},         
	{89   , 3684},         
	{91   , 3670},         
	{93   , 3655},         
	{94   , 3646},         
	{95   , 3641},         
	{95   , 3636},          
        {96   , 3632},
        {97   , 3627},
        {97   , 3623},
        {97   , 3619},
        {98   , 3615},
        {98   , 3611},
        {99   , 3607},
        {99   , 3603},
        {99   , 3600},
	{99   , 3597}, 
	{100  , 3593},
	{100  , 3589},
	{100  , 3587},
	{100  , 3400}
};      
         
// T1 0C 
BATTERY_PROFILE_STRUC battery_profile_t1[] =
{              
	{0   , 4304},
	{2   , 4270},
	{3   , 4245},
	{5   , 4226},
	{6   , 4209},
	{8   , 4190},
	{9   , 4174},
	{11  , 4158},
	{12  , 4143},
	{14  , 4128},
	{15  , 4113},
	{17  , 4098},
	{18  , 4085},
	{20  , 4071},
	{21  , 4056},
	{23  , 4040},
	{24  , 4025},
	{26  , 4011},
	{27  , 3996},
	{29  , 3983},
	{30  , 3971},
	{32  , 3960},
	{33  , 3949},
	{35  , 3937},
	{36  , 3926},
	{38  , 3913},
	{39  , 3901},
	{41  , 3890},
	{42  , 3878},
	{44  , 3867},
	{45  , 3858},
	{47  , 3849},
	{49  , 3840},
	{50  , 3833},
	{52  , 3826},
	{53  , 3820},
	{55  , 3813},
	{56  , 3809},
	{58  , 3803},
	{59  , 3798},
	{61  , 3794},
	{62  , 3789},
	{64  , 3786},
	{65  , 3783},
	{67  , 3780},
	{68  , 3777},
	{70  , 3775},
	{71  , 3773},
	{73  , 3771},
	{74  , 3766},
	{76  , 3761},
	{77  , 3756},
	{79  , 3750},
	{80  , 3744},
	{82  , 3739},
	{83  , 3730},
	{85  , 3722},
	{86  , 3711},
	{88  , 3701},
	{89  , 3687},
	{91  , 3673},
        {93  , 3662},
        {94  , 3650},
        {96  , 3632},
        {97  , 3597},
        {98  , 3560},
        {98  , 3534},
        {99  , 3513},
        {99  , 3497},
        {99  , 3484},
	{100 , 3472},
	{100 , 3462},
	{100 , 3454},
	{100 , 3448},
	{100 , 3400}
};             


// T2 25C
BATTERY_PROFILE_STRUC battery_profile_t2[] =
{              
	{0   , 4325},
	{1   , 4298},
	{3   , 4276},
	{4   , 4257},
	{6   , 4238},
	{7   , 4221},
	{9   , 4205},
	{10  , 4188},
	{12  , 4172},
	{13  , 4157},
	{15  , 4142},
	{16  , 4126},
	{18  , 4111},
	{19  , 4097},
	{20  , 4083},
	{22  , 4070},
	{23  , 4056},
	{25  , 4042},
	{26  , 4027},
	{28  , 4013},
	{29  , 4001},
	{31  , 3989},
	{32  , 3978},
	{34  , 3968},
	{35  , 3957},
	{36  , 3946},
	{38  , 3933},
	{39  , 3922},
	{41  , 3909},
	{42  , 3896},
	{44  , 3883},
	{45  , 3872},
	{47  , 3861},
	{48  , 3852},
	{50  , 3844},
	{51  , 3836},
	{53  , 3829},
	{54  , 3824},
	{55  , 3818},
	{57  , 3812},
	{58  , 3807},
	{60  , 3803},
	{61  , 3798},
	{63  , 3794},
	{64  , 3790},
	{66  , 3787},
	{67  , 3784},
	{69  , 3780},
	{70  , 3777},
	{72  , 3774},
	{73  , 3768},
	{74  , 3761},
	{76  , 3755},
	{77  , 3749},
	{79  , 3744},
	{80  , 3739},
	{82  , 3734},
	{83  , 3728},
	{85  , 3720},
	{86  , 3712},
	{88  , 3704},
        {89  , 3692},
        {91  , 3682},
        {92  , 3677},
        {93  , 3671},
        {95  , 3661},
        {96  , 3633},
        {98  , 3568},
        {99  , 3473},
        {100 , 3324},
	{100 , 3297},
	{100 , 3285},
	{100 , 3278},
	{100 , 3275},
	{100 , 3275}
};             


// T3 50C
BATTERY_PROFILE_STRUC battery_profile_t3[] =
{              
	{0   , 4337},
	{1   , 4310},
	{3   , 4287},
	{4   , 4267},
	{6   , 4249},
	{7   , 4232},
	{9   , 4215},
	{10  , 4198},
	{12  , 4182},
	{13  , 4166},
	{14  , 4150},
	{16  , 4135},
	{17  , 4120},
	{19  , 4105},
	{20  , 4091},
	{22  , 4077},
	{23  , 4064},
	{25  , 4051},
	{26  , 4036},
	{27  , 4023},
	{29  , 4010},
	{30  , 3999},
	{32  , 3987},
	{33  , 3976},
	{35  , 3965},
	{36  , 3954},
	{38  , 3944},
	{39  , 3932},
	{41  , 3920},
	{42  , 3907},
	{43  , 3893},
	{45  , 3879},
	{46  , 3868},
	{48  , 3858},
	{49  , 3849},
	{51  , 3841},
	{52  , 3834},
	{53  , 3827},
	{55  , 3821},
	{56  , 3816},
	{58  , 3809},
	{59  , 3805},
	{61  , 3800},
	{62  , 3796},
	{64  , 3791},
	{65  , 3787},
	{67  , 3784},
	{68  , 3781},
	{69  , 3777},
	{71  , 3773},
	{72  , 3763},
	{74  , 3754},
	{75  , 3748},
	{77  , 3742},
	{78  , 3736},
	{80  , 3730},
	{81  , 3726},
	{82  , 3720},
	{84  , 3713},
	{85  , 3705},
	{87  , 3698},
        {88  , 3689},
        {90  , 3677},
        {91  , 3671},
        {93  , 3666},
        {94  , 3659},
        {95  , 3644},
        {97  , 3601},
        {98  , 3530},
        {100 , 3428},
	{100 , 3288},
	{100 , 3273},
	{100 , 3266},
	{100 , 3263},
	{100 , 3263}
};             
           

// battery profile for actual temperature. The size should be the same as T1, T2 and T3
BATTERY_PROFILE_STRUC battery_profile_temperature[] =
{
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },          
        {0  , 0 },
        {0  , 0 },
        {0  , 0 },
        {0  , 0 },
        {0  , 0 },
        {0  , 0 },
        {0  , 0 },
        {0  , 0 },
        {0  , 0 },
	{0  , 0 }, 
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 }
};      

/////////////////////////////////////////////////////////////////////
// <Rbat, Battery_Voltage> Table
/////////////////////////////////////////////////////////////////////
typedef struct _R_PROFILE_STRUC
{
    kal_int32 resistance; // Ohm
    kal_int32 voltage;
} R_PROFILE_STRUC, *R_PROFILE_STRUC_P;

// T0 -10C
R_PROFILE_STRUC r_profile_t0[] =
{              
	{488 , 4308},
	{488 , 4274},
	{530 , 4229},
	{620 , 4196},
	{643 , 4174},
	{650 , 4155},
	{658 , 4138},
	{665 , 4122},
	{668 , 4106},
	{685 , 4093},
	{703 , 4078},
	{710 , 4062},
	{708 , 4045},
	{705 , 4028},
	{705 , 4013},
	{703 , 3998},
	{698 , 3984},
	{698 , 3971},
	{698 , 3959},
	{703 , 3948},
	{700 , 3936},
	{698 , 3923},
	{700 , 3912},
	{698 , 3900},
	{698 , 3888},
	{695 , 3876},
	{700 , 3866},
	{703 , 3856},
	{700 , 3846},
	{703 , 3837},
	{705 , 3829},
	{713 , 3822},
	{715 , 3815},
	{720 , 3810},
	{725 , 3804},
	{725 , 3798},
	{730 , 3794},
	{733 , 3789},
	{735 , 3785},
	{743 , 3782},
	{748 , 3779},
	{755 , 3776},
	{763 , 3773},
	{770 , 3770},
	{775 , 3766},
	{788 , 3763},
	{798 , 3759},
	{805 , 3753},
	{818 , 3748},
	{830 , 3742},
	{843 , 3734},
	{863 , 3727},
	{880 , 3717},
	{908 , 3708},
	{940 , 3697},
	{985 , 3684},
	{1043, 3670},
	{1118, 3655},
	{1118, 3646},
	{1105, 3641},
	{1090, 3636},
        {1080, 3632},
        {1068, 3627},
        {1058, 3623},
        {1053, 3619},
        {1045, 3615},
        {1035, 3611},
        {1020, 3607},
        {1015, 3603},
        {1008, 3600},
	{995 , 3597},
	{990 , 3593},
	{975 , 3589},
	{970 , 3587},
	{505 , 3400}
};             
              

// T1 0C
R_PROFILE_STRUC r_profile_t1[] =
{              
	{350 , 4304},
	{350 , 4270},
	{358 , 4245},
	{365 , 4226},
	{375 , 4209},
	{373 , 4190},
	{375 , 4174},
	{378 , 4158},
	{383 , 4143},
	{383 , 4128},
	{385 , 4113},
	{385 , 4098},
	{390 , 4085},
	{400 , 4071},
	{405 , 4056},
	{405 , 4040},
	{403 , 4025},
	{403 , 4011},
	{398 , 3996},
	{395 , 3983},
	{393 , 3971},
	{393 , 3960},
	{393 , 3949},
	{390 , 3937},
	{393 , 3926},
	{388 , 3913},
	{385 , 3901},
	{385 , 3890},
	{383 , 3878},
	{378 , 3867},
	{383 , 3858},
	{383 , 3849},
	{378 , 3840},
	{380 , 3833},
	{380 , 3826},
	{383 , 3820},
	{383 , 3813},
	{390 , 3809},
	{390 , 3803},
	{393 , 3798},
	{395 , 3794},
	{395 , 3789},
	{403 , 3786},
	{405 , 3783},
	{405 , 3780},
	{408 , 3777},
	{413 , 3775},
	{415 , 3773},
	{423 , 3771},
	{418 , 3766},
	{418 , 3761},
	{423 , 3756},
	{423 , 3750},
	{428 , 3744},
	{433 , 3739},
	{435 , 3730},
	{445 , 3722},
	{450 , 3711},
	{465 , 3701},
	{480 , 3687},
	{503 , 3673},
        {543 , 3662},
        {608 , 3650},
        {713 , 3632},
        {915 , 3597},
        {903 , 3560},
        {838 , 3534},
        {785 , 3513},
        {745 , 3497},
        {710 , 3484},
	{685 , 3472},
	{665 , 3462},
	{643 , 3454},
	{623 , 3448},
	{510 , 3400}
}; 

// T2 25C
R_PROFILE_STRUC r_profile_t2[] =
{              
	{190 , 4325},
	{190 , 4298},
	{193 , 4276},
	{193 , 4257},
	{190 , 4238},
	{190 , 4221},
	{193 , 4205},
	{190 , 4188},
	{190 , 4172},
	{193 , 4157},
	{195 , 4142},
	{195 , 4126},
	{195 , 4111},
	{200 , 4097},
	{200 , 4083},
	{200 , 4070},
	{205 , 4056},
	{205 , 4042},
	{205 , 4027},
	{208 , 4013},
	{210 , 4001},
	{208 , 3989},
	{210 , 3978},
	{213 , 3968},
	{213 , 3957},
	{213 , 3946},
	{208 , 3933},
	{210 , 3922},
	{200 , 3909},
	{198 , 3896},
	{190 , 3883},
	{185 , 3872},
	{183 , 3861},
	{183 , 3852},
	{180 , 3844},
	{180 , 3836},
	{180 , 3829},
	{183 , 3824},
	{183 , 3818},
	{185 , 3812},
	{188 , 3807},
	{190 , 3803},
	{193 , 3798},
	{195 , 3794},
	{193 , 3790},
	{198 , 3787},
	{200 , 3784},
	{198 , 3780},
	{198 , 3777},
	{200 , 3774},
	{193 , 3768},
	{193 , 3761},
	{190 , 3755},
	{190 , 3749},
	{190 , 3744},
	{190 , 3739},
	{190 , 3734},
	{193 , 3728},
	{193 , 3720},
	{190 , 3712},
	{193 , 3704},
        {193 , 3692},
        {195 , 3682},
        {198 , 3677},
        {205 , 3671},
        {213 , 3661},
        {215 , 3633},
        {223 , 3568},
        {250 , 3473},
        {310 , 3324},
	{245 , 3297},
	{215 , 3285},
	{203 , 3278},
	{193 , 3275},
	{193 , 3275}
};

// T3 50C
R_PROFILE_STRUC r_profile_t3[] =
{              
	{145 , 4337},
	{145 , 4310},
	{143 , 4287},
	{145 , 4267},
	{145 , 4249},
	{145 , 4232},
	{145 , 4215},
	{145 , 4198},
	{145 , 4182},
	{145 , 4166},
	{148 , 4150},
	{150 , 4135},
	{150 , 4120},
	{153 , 4105},
	{153 , 4091},
	{158 , 4077},
	{160 , 4064},
	{163 , 4051},
	{160 , 4036},
	{163 , 4023},
	{165 , 4010},
	{168 , 3999},
	{168 , 3987},
	{170 , 3976},
	{170 , 3965},
	{170 , 3954},
	{173 , 3944},
	{173 , 3932},
	{170 , 3920},
	{168 , 3907},
	{160 , 3893},
	{153 , 3879},
	{153 , 3868},
	{153 , 3858},
	{150 , 3849},
	{148 , 3841},
	{148 , 3834},
	{148 , 3827},
	{150 , 3821},
	{150 , 3816},
	{148 , 3809},
	{153 , 3805},
	{153 , 3800},
	{155 , 3796},
	{153 , 3791},
	{155 , 3787},
	{155 , 3784},
	{160 , 3781},
	{160 , 3777},
	{160 , 3773},
	{150 , 3763},
	{145 , 3754},
	{150 , 3748},
	{153 , 3742},
	{150 , 3736},
	{148 , 3730},
	{150 , 3726},
	{148 , 3720},
	{148 , 3713},
	{148 , 3705},
	{150 , 3698},
        {150 , 3689},
        {148 , 3677},
        {150 , 3671},
        {153 , 3666},
        {158 , 3659},
        {158 , 3644},
        {158 , 3601},
        {168 , 3530},
        {185 , 3428},
	{225 , 3288},
	{185 , 3273},
	{170 , 3266},
	{160 , 3263},
	{160 , 3263}
};

// r-table profile for actual temperature. The size should be the same as T1, T2 and T3
R_PROFILE_STRUC r_profile_temperature[] =
{
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },         
	{0  , 0 },          
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
  {0  , 0 },
	{0  , 0 }, 
	{0  , 0 },
	{0  , 0 },
	{0  , 0 },
	{0  , 0 }
};   


int fgauge_get_saddles(void);
BATTERY_PROFILE_STRUC_P fgauge_get_profile(kal_uint32 temperature);

int fgauge_get_saddles_r_table(void);
R_PROFILE_STRUC_P fgauge_get_profile_r_table(kal_uint32 temperature);

//#define CONFIG_POWER_VERIFY
